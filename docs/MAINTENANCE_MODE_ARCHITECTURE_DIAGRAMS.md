# ğŸ¨ MAINTENANCE MODE - SYSTEM ARCHITECTURE DIAGRAM

---

## ğŸ“Š System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ALUMNI CONNECT APP                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  MaintenanceWrapper   â”‚
                   â”‚  (App Component)      â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Check /api/maintenance/â”‚
                   â”‚ check (Public Endpoint)â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ isActive: true â”‚         â”‚ isActive: false â”‚
        â”‚ & NOT admin    â”‚         â”‚ OR admin        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Show MaintenancePage â”‚   â”‚ Show Normal App   â”‚
        â”‚ - Icon               â”‚   â”‚                   â”‚
        â”‚ - Message            â”‚   â”‚ - All components  â”‚
        â”‚ - Estimated Time     â”‚   â”‚ - Full access     â”‚
        â”‚ - Refresh Button     â”‚   â”‚ - All features    â”‚
        â”‚ - Auto Refresh (30s) â”‚   â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Request Flow

### User Request Flow
```
USER
  â”‚
  â–¼
[Browser Makes Request]
  â”‚
  â–¼
frontend/App.jsx
  â”‚
  â–¼
MaintenanceWrapper Component
  â”‚
  â”œâ”€â†’ fetch('/api/maintenance/check')
  â”‚
  â–¼
backend/server.js
  â”‚
  â–¼
MaintenanceController.checkMaintenanceStatus()
  â”‚
  â–¼
Maintenance.findOne() [Database Query]
  â”‚
  â–¼
Return: { isActive: boolean, message, estimatedTime }
  â”‚
  â–¼
MaintenanceWrapper decides:
  â”‚
  â”œâ”€â†’ If isActive AND user not admin â†’ Show MaintenancePage
  â”‚
  â””â”€â†’ Else â†’ Show Normal App
```

---

## ğŸ›¡ï¸ Admin Request Flow

### Admin Toggle Maintenance
```
ADMIN (Logged In)
  â”‚
  â–¼
[Click Toggle in AdminSettings]
  â”‚
  â–¼
handleSaveSettings()
  â”‚
  â”œâ”€â†’ PUT /api/maintenance/update
  â”‚
  â–¼
backend/server.js
  â”‚
  â”œâ”€â†’ Check: protectRoute (Auth validation)
  â”‚
  â”œâ”€â†’ Check: requireAdmin (Role validation)
  â”‚
  â–¼
MaintenanceController.updateMaintenanceStatus()
  â”‚
  â–¼
Maintenance.findOne() and update
  â”‚
  â–¼
Database: Save { isActive, message, estimatedTime }
  â”‚
  â–¼
Return: Success message
  â”‚
  â–¼
AdminSettings: Show "Settings saved successfully!"
  â”‚
  â–¼
Next user refresh: Sees updated status
```

---

## ğŸŒ Global Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FRONTEND                               â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ App.jsx                                            â”‚   â”‚
â”‚  â”‚ â””â”€â†’ Wraps all routes with MaintenanceWrapper      â”‚   â”‚
â”‚  â”‚                                                    â”‚   â”‚
â”‚  â”‚ MaintenanceWrapper.jsx                            â”‚   â”‚
â”‚  â”‚ â””â”€â†’ Checks maintenance status on load             â”‚   â”‚
â”‚  â”‚ â””â”€â†’ Checks every 30 seconds                       â”‚   â”‚
â”‚  â”‚ â””â”€â†’ Shows MaintenancePage if active               â”‚   â”‚
â”‚  â”‚ â””â”€â†’ Shows normal app if inactive                  â”‚   â”‚
â”‚  â”‚                                                    â”‚   â”‚
â”‚  â”‚ MaintenancePage.jsx                               â”‚   â”‚
â”‚  â”‚ â””â”€â†’ Beautiful UI when maintenance active          â”‚   â”‚
â”‚  â”‚ â””â”€â†’ Shows status and estimated time               â”‚   â”‚
â”‚  â”‚                                                    â”‚   â”‚
â”‚  â”‚ AdminSettings.jsx                                 â”‚   â”‚
â”‚  â”‚ â””â”€â†’ Toggle button for admins                      â”‚   â”‚
â”‚  â”‚ â””â”€â†’ Saves to backend                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP Requests
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND                                â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ server.js                                          â”‚   â”‚
â”‚  â”‚ â””â”€â†’ CheckMaintenance middleware                   â”‚   â”‚
â”‚  â”‚    â””â”€â†’ Blocks non-admin users                     â”‚   â”‚
â”‚  â”‚    â””â”€â†’ Allows admins                              â”‚   â”‚
â”‚  â”‚                                                    â”‚   â”‚
â”‚  â”‚ MaintenanceRoutes.js                              â”‚   â”‚
â”‚  â”‚ â”œâ”€â†’ GET /api/maintenance/check (Public)          â”‚   â”‚
â”‚  â”‚ â”œâ”€â†’ GET /api/maintenance/status (Admin)          â”‚   â”‚
â”‚  â”‚ â””â”€â†’ PUT /api/maintenance/update (Admin)          â”‚   â”‚
â”‚  â”‚                                                    â”‚   â”‚
â”‚  â”‚ MaintenanceController.js                          â”‚   â”‚
â”‚  â”‚ â”œâ”€â†’ getMaintenanceStatus()                        â”‚   â”‚
â”‚  â”‚ â”œâ”€â†’ updateMaintenanceStatus()                     â”‚   â”‚
â”‚  â”‚ â””â”€â†’ checkMaintenanceStatus()                      â”‚   â”‚
â”‚  â”‚                                                    â”‚   â”‚
â”‚  â”‚ CheckMaintenance.js (Middleware)                  â”‚   â”‚
â”‚  â”‚ â””â”€â†’ Checks if maintenance active                 â”‚   â”‚
â”‚  â”‚ â””â”€â†’ Returns 503 if user not admin                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ Database Queries
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE (MongoDB)                       â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Maintenance Collection                             â”‚   â”‚
â”‚  â”‚ â”œâ”€â†’ isActive (Boolean)                            â”‚   â”‚
â”‚  â”‚ â”œâ”€â†’ message (String)                              â”‚   â”‚
â”‚  â”‚ â”œâ”€â†’ estimatedTime (String)                        â”‚   â”‚
â”‚  â”‚ â”œâ”€â†’ lastUpdatedBy (String)                        â”‚   â”‚
â”‚  â”‚ â””â”€â†’ updatedAt (Timestamp)                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin User      â”‚
â”‚  (Logged In)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    [Token Stored]
    in localStorage
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AdminSettings.jsx        â”‚
â”‚ (Toggle Maintenance)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Add Token to    â”‚
    â”‚ Request Headers â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: protectRoute Middleware â”‚
â”‚ - Check token exists             â”‚
â”‚ - Verify token is valid          â”‚
â”‚ - Extract user info              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: requireAdmin Middleware â”‚
â”‚ - Check user.role === 'admin'    â”‚
â”‚ - Allow/deny access              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ If Admin: âœ…   â”‚
    â”‚ If Not: âŒ     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ Status Check Flow (Every 30 Seconds)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MaintenancePage â”‚
â”‚ (User Viewing)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    setInterval(
      fetchMaintenanceStatus,
      30000  â† 30 seconds
    )
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ fetch('/api/      â”‚
    â”‚  maintenance/     â”‚
    â”‚  check')          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Backend returns: â”‚
    â”‚ { isActive: ... }â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Update page state   â”‚
    â”‚ Show new status     â”‚
    â”‚ OR redirect to app  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Decision Tree

```
User Accesses App
    â”‚
    â–¼
[MaintenanceWrapper checks status]
    â”‚
    â”œâ”€â†’ Is database connected?
    â”‚   â”œâ”€â†’ NO  â†’ Continue (fail-safe)
    â”‚   â””â”€â†’ YES â†’ Check maintenance status
    â”‚
    â–¼
[Query: Maintenance.findOne()]
    â”‚
    â”œâ”€â†’ No document exists
    â”‚   â””â”€â†’ isActive = false (default)
    â”‚
    â”œâ”€â†’ Document exists
    â”‚   â””â”€â†’ Read isActive field
    â”‚
    â–¼
[Is Maintenance Active?]
    â”‚
    â”œâ”€â†’ isActive = false
    â”‚   â””â”€â†’ Show App âœ…
    â”‚
    â””â”€â†’ isActive = true
        â”‚
        â–¼
        [Is user an admin?]
        â”‚
        â”œâ”€â†’ YES
        â”‚   â””â”€â†’ Show App (Admin Bypass) âœ…
        â”‚
        â””â”€â†’ NO
            â””â”€â†’ Show MaintenancePage âŒ
```

---

## ğŸ“ API Response Flow

### Success Response (Maintenance Check)
```
User Request
    â”‚
    â–¼
GET /api/maintenance/check
    â”‚
    â–¼
Database Query
    â”‚
    â–¼
Response 200 OK
{
  "isActive": true/false,
  "message": "System is under maintenance...",
  "estimatedTime": "2 hours"
}
    â”‚
    â–¼
Frontend processes
    â”‚
    â–¼
User sees result
```

### Blocked Response (User During Maintenance)
```
User Request
    â”‚
    â–¼
Middleware: CheckMaintenance
    â”‚
    â”œâ”€â†’ Is Maintenance Active? YES
    â”œâ”€â†’ Is User Admin? NO
    â”‚
    â–¼
Response 503 Service Unavailable
{
  "success": false,
  "message": "System is under maintenance...",
  "estimatedTime": "2 hours",
  "maintenanceMode": true
}
    â”‚
    â–¼
User is blocked
```

---

## ğŸ¨ Component Hierarchy

```
App (root)
â”‚
â”œâ”€â†’ MaintenanceWrapper
â”‚   â”‚
â”‚   â”œâ”€â†’ Check /api/maintenance/check
â”‚   â”‚
â”‚   â”œâ”€â†’ If Maintenance Active & Not Admin:
â”‚   â”‚   â””â”€â†’ MaintenancePage
â”‚   â”‚       â”œâ”€â†’ Header
â”‚   â”‚       â”œâ”€â†’ Status Info
â”‚   â”‚       â”œâ”€â†’ Message
â”‚   â”‚       â”œâ”€â†’ Estimated Time
â”‚   â”‚       â””â”€â†’ Refresh Button
â”‚   â”‚
â”‚   â””â”€â†’ Else:
â”‚       â””â”€â†’ Normal App Routes
â”‚           â”œâ”€â†’ Layout
â”‚           â”œâ”€â†’ Home
â”‚           â”œâ”€â†’ Dashboard
â”‚           â”œâ”€â†’ AdminPanel
â”‚           â””â”€â†’ ... (all routes)
```

---

## ğŸ“ˆ Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             ADMIN TOGGLES MAINTENANCE          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ adminSettings.jsx   â”‚
           â”‚ handleSaveSettings()â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ axios.put(                      â”‚
      â”‚  '/api/maintenance/update',     â”‚
      â”‚  { isActive: true, ... }        â”‚
      â”‚ )                               â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Backend: Receives PUT   â”‚
           â”‚ MaintenanceController   â”‚
           â”‚ updateMaintenanceStatus â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Database: Update status â”‚
           â”‚ Maintenance.findOne()   â”‚
           â”‚ .update() â†’ save()      â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Response: 200 OK        â”‚
           â”‚ {                       â”‚
           â”‚  message: "Success",    â”‚
           â”‚  maintenance: {...}     â”‚
           â”‚ }                       â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Admin sees: "Saved!"    â”‚
           â”‚ Database updated        â”‚
           â”‚ Users start seeing      â”‚
           â”‚ maintenance page on     â”‚
           â”‚ next page load          â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ Key Points Visualized

```
ADMIN CAN ALWAYS ACCESS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Toggle Maintenance  â”‚
â”‚        ON           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Regular Users:      â”‚ Admin:
â”‚ âŒ BLOCKED          â”‚ âœ… CAN WORK
â”‚ See Maint Page      â”‚ Full Access
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


DATABASE PERSISTENCE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin toggles OFF   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status saved in MongoDB     â”‚
â”‚ Persists across restarts    â”‚
â”‚ Multiple servers read same  â”‚
â”‚ status                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


AUTO REFRESH (30 SECONDS)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User on Maintenance Page â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 0s:  Check status
         â”‚ 10s: Still active
         â”‚ 20s: Check again
         â”‚ 30s: Check again
         â”‚      (Admin just toggled OFF)
         â”‚ 33s: Status changes
         â”‚ â–¼
         â”œâ”€â†’ Page auto-refreshes
         â””â”€â†’ User sees app now âœ…
```

---

## ğŸ“ Visual Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MAINTENANCE MODE - SYSTEM VISUALIZATION                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ADMIN SIDE                    USER SIDE                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Settings  â”‚                â”‚ Browse App   â”‚             â”‚
â”‚  â”‚ Toggle ON â”‚                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                       â”‚                     â”‚
â”‚        â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚        â”‚                    â”‚ MaintenanceWrapperâ”‚          â”‚
â”‚        â”‚                    â”‚ Check Status      â”‚          â”‚
â”‚        â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚        â”‚                             â”‚                     â”‚
â”‚        â–¼                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚ isActive: true    â”‚          â”‚
â”‚  â”‚ Database:    â”‚           â”‚ isAdmin: false    â”‚          â”‚
â”‚  â”‚ isActive:trueâ”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚                     â”‚
â”‚        â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚        â”‚                    â”‚ Show              â”‚          â”‚
â”‚        â”‚                    â”‚ MaintenancePage   â”‚          â”‚
â”‚        â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚        â”‚                                                   â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
â”‚           (On next refresh/new session)                    â”‚
â”‚                                                             â”‚
â”‚  ADMIN ACCESS (BYPASS)          USER BLOCKED               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Can still access  â”‚          â”‚ Maintenance  â”‚           â”‚
â”‚  â”‚ Admin Panel       â”‚          â”‚ Page         â”‚           â”‚
â”‚  â”‚ Dashboard         â”‚          â”‚ (503 Status) â”‚           â”‚
â”‚  â”‚ Make fixes        â”‚          â”‚ Auto-refresh â”‚           â”‚
â”‚  â”‚ Manage system     â”‚          â”‚ every 30s    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**This diagram shows the complete system architecture and data flow!**
